<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		.a {
			display: block;
			height: 20px;
		}
	</style>
</head>
<body>

	<span class="a b" style="display: block; height: 20px;">1</span>
	<span>2</span>
	<span>3</span>
	<input type="" name="" value="good">

	<script type="text/javascript" src="11.9-to-core.js"></script>
	<script type="text/javascript" src="15.14-to-dom.js"></script>
	<script type="text/javascript">
		
		$.extend({

			// get the style in different browsers
			getStyle: function(dom, style) {

				// prioritily confirm new browsers
				if(window.getComputedStyle) {

					return window.getComputedStyle(dom)[style];
				} else {
					// IE8
					return dom.currentStyle[style];
				}
			}
		});

		$.fn.extend({


			/*
				1. addClass: add class to all elem
				2. removeClass: remove class to all elem
				3. hasClass: confirm whether one has class
				4. toggleClass: !operation
				5. attr: 'set' or 'get' elem attribute node
				6. prop: 'set' or 'get' elem property value.
				7. val: 'get' or 'set' 'value' property
				8. css 'get' or 'set' css style
			*/

			/*
				attr method.

				process:
				1.confirm attr is string or object, if not will return this
				2. if is string type, will confirm argument length, if length is 1, will get the first element and return,
				3. if arguments.length == 2, will traverse all elements and set the attribute value.
				4.if is object, will traverse all elements and set attribute value.
				5. return this.
			*/

			attr: function(attr, val) {
				if(!jQuery._isString(attr) && !jQuery.isObject(attr)) {
					return this;
				}

				if( jQuery._isString(attr) ) {
					
					// get attribute value of first elem
					if(arguments.length === 1) {
						
						return this.get(0).getAttribute(attr);

					} else {
						// set all elem attribute
						for(var i = 0, len = this.length; i < len; i++) {
							this[i].setAttribute(attr, val);
						}

					}
			// attr is object type, set all elem attribute
				} else {
					
					// traverse all attr object 
					for (var key in attr) {
						
						// traverse all elem
						for(var i = 0, len = this.length; i < len; i++) {

							this[i].setAttribute(key, attr[key]);
						}
					}
				}
				// chain programming.
				return this;
			},

			_attr: function(attr, val) {

				/*
					1. confirm arguments.length == 1, if attr is string, get the first elem, else if attr is object type, set all elem attribute value as obj[key].
					2. arguments.length >= 2, set all elem attribute value as val.
				*/
				
				var self = this;

				if(arguments.length === 1) {

					if(jQuery._isString(attr)) {
						
						return this[0].getAttribute(attr);

					} else if (jQuery.isObject(attr)) {
						// use jquery static each method to traverse attr object
						jQuery.each(attr, function(key, val) {
							//  notice 'self'
							self.each(function() {
								this.setAttribute(key, val);
							});
						});
					}

				} else if(arguments.length >= 2) {
					
					this.each(function() {
						this.setAttribute(attr, val);
					});
					
				}
				return this;
			},

			prop: function(attr, val) {

				// same as attr method
				if(!jQuery._isString(attr) && !jQuery.isObject(attr)) {
					return this;
				}
				
				// string type
				if(jQuery._isString(attr)) {
					if(arguments.length === 1) {
						// only '[]' or '.'
						return this[0][attr];

					} else {
						for(var i = 0, len = this.length; i < len; i++) {

							this[i][attr] = val;
						}
					}

				} else {

					// object type
					for(var key in attr) {
						for(var i = 0, len = this.length; i < len; i++) {
							this[i][key] = attr[key];
						}
					}
				}

				return this;
			},

			_prop: function(prop, value) {

				if(arguments.length === 1) {

					if(jQuery._isString(prop)) {
						return this[0][prop];
					}

					else if(jQuery.isObject(prop)) {
						
						var self = this;
						jQuery.each(prop, function(key, val) {
							self.each(function() {

								this[key] = val;
							});
						});
					}

				} else if(arguments.length >= 2) {
					
					this.each(function() {
						this[prop] = value;
					});
				}

				return this;
			},

			// same as attr
			// but should note: getComputedStyle(div).height
			// or currentStyle (IE8)
			// import getStyle() method

			css: function(styleName, style) {

				
				/*

					1. if arguments.length === 1
					2. confirm styleName is string, if yes get the first elem
					3.confirm styleName is object , if yes set all elem
					4.if arguments.length >= 2, set all elem 
					5. return this
				*/

				if(arguments.length === 1) {

					if(jQuery._isString(styleName)) {
					
						// use encapsulated static method
						return jQuery.getStyle(this[0], styleName);
					}
					else if(jQuery.isObject(styleName)) {

						for(var key in styleName) {

							for(var i = 0, len = this.length; i < len; i++) {

								// set all elems
								this[i]['style'][key] = styleName[key];
							}
						}
					}

				} else {

					for(var i = 0, len = this.length; i < len; i++) {
						
						// set all elems
						this[i]['style'][styleName] = style;
					}
				}

				return this;
			},

			_css: function(styleName, style) {

				if(arguments.length === 1) {

					if(jQuery._isString(styleName)) {

						return jQuery.getStyle(this[0], styleName);
					} 
					else if(jQuery.isObject(styleName)) {
						
						var self = this;
						jQuery.each(styleName, function(key, val) {
							self.each(function() {
								this['style'][key] = val;
							});
						});
					}

				} else if (arguments.length >= 2) {

					this.each(function() {
						this['style'][styleName] = style;
					});
				}

				return this;
			},

			/*

				1. if arguments.length === 0, return the first element 'value' value,
				2. otherwise, traverse all elems and set 'value'.
			*/
			val: function(value) {
				
				// if no arguments,
				if(arguments.length === 0) {
					return this[0].value;

				} else {
					// has value arguments
					for(var i = 0, len = this.length; i < len; i++) {
						this[i].value = value;
					}
				}

				return this;
			},

			_val: function(value) {

				if(arguments.length === 0) {
					// return this[0].value;
					return this.prop('value');

				} else {

					// this.each(function() {
					// 	this.value = value;
					// });
					return this.prop('value', value);
				}

				// return this;
			},
			
			/*
				hasClass method
				1. traverse all elems
				2. get all elem of className, add ' ' on both ends
				3.use indexOf method return true or false

			*/ 
			hasClass: function(className) {
				
				for(var i = 0, len = this.length; i < len; i++) {
					// only if has one, return true
					if( (' ' + this[i].className + ' ').indexOf(' ' + className + ' ') > -1 ) {
						return true;
					}
				}

				return false;
			},

			_hasClass: function(className) {
				
				var has = false;

				this.each(function() {
					if( (' ' + this.className + ' ').indexOf(' ' + className + ' ') > -1) {
						has = true;
					}
				});
				return has;
			},
			
			/*
				1. add clas to all elems
				2. if had, ignore it.
				3. add different class by ' ' space

			*/ 
			addClass: function(className) {
				
				
			},
			
			/*
				if no arguments, remove all class
				otherwise remove pointed class
			*/
			removeClass: function() {


			},
			
			/*
				if has remove, otherwise add, use addClass and removeClass
			*/
			toggleClass: function() {

			}


		});

		/*$('span')._prop({

			a: 'aa',
			b: 'bb',
			c: 'cc'
		});

		console.log($('span')._prop('a'));
		$('span')._prop('a', 'ok');*/
	

		/*console.log($('span').css('display'));
		$('span').css('height', '60px');*/

		// $('input')._val('great');

		// console.log($('span')._hasClass('a'));











	</script>
</body>
</html>